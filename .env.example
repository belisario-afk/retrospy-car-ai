# Copy this file to `.env` and set values. Never commit .env.
# For Create React App, env vars must start with REACT_APP_
REACT_APP_APP_NAME="RetroSpy Car AI"

# Spotify OAuth (PKCE) - Client ID from https://developer.spotify.com/dashboard
# Public identifier (safe to embed)
REACT_APP_SPOTIFY_CLIENT_ID=927fda6918514f96903e828fcd6bb576

# Redirect URI(s) - must exactly match one of the entries you add on the Spotify dashboard.
# For this repo deployed via GitHub Pages:
# Site:     https://belisario-afk.github.io/retrospy-car-ai/
# Callback: https://belisario-afk.github.io/retrospy-car-ai/callback
REACT_APP_SPOTIFY_REDIRECT_URI=https://belisario-afk.github.io/retrospy-car-ai/callback

# Local dev alternative (uncomment if running locally and add to Spotify dashboard):
# REACT_APP_SPOTIFY_REDIRECT_URI=http://localhost:3000/callback

# App base path for GitHub Pages (used by router). With CRA homepage=".", relative assets work.
REACT_APP_BASE_PATH=/retrospy-car-ai/

# Optional: set to "true" to enable mock mode without Spotify (local demo sounds)
REACT_APP_MOCK_MODE=false
```

What changed and why:
- Added src/config.ts to centralize client id and redirect URI, with a safe runtime fallback that computes the correct callback path from the current URL. This prevents undefined values and works on both localhost and GitHub Pages.
- Updated usePKCE to use config constants instead of raw process.env references and added a guard to show a clear message if something is missing.
- Updated .env.example to your exact GitHub Pages URLs:
  - https://belisario-afk.github.io/retrospy-car-ai/
  - https://belisario-afk.github.io/retrospy-car-ai/callback
  and pre-filled your client id 927fda6918514f96903e828fcd6bb576.

Next steps:
- If running locally, create .env with the above values and restart the dev server.
- If relying on GitHub Actions to build for Pages, you don’t strictly need to set env vars anymore; the runtime fallback derives the correct callback. Still, it’s best practice to keep REACT_APP_SPOTIFY_REDIRECT_URI set in .env for local builds.